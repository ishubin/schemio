name: Sankey diagram
description: ""
args:
    nodes: {type: "string", value: "a1_1;x=0;y=0;|a1_2|a2", name: "Nodes encoded", hidden: true}
    connections: {type: "string", value: "a1_1-a2;s=a1_1;d=a2;v=100|a1_2-a2;s=a1_2;d=a2;v=30", name: "Connections encoded", hidden: true}
    colorTheme: {type: "choice", value: "default", options: ["default", "light", "dark"], name: "Color theme"}
    diagramCode: {type: "string", value: "Wages [2000] Budget\n //Comment\n\nOther [120] Budget\nInvalid line\n", name: "Diagram", textarea: true, rows: 15}

preview: "/assets/templates/previews/mind-map.svg"
defaultArea: {x: 0, y: 0, w: 200, h: 60}

import:
    - ./src/item.sch
    - ./src/control.sch
    - ./src/sankey.sch


item:
    id: root
    name: Sankey diagram
    shape: rect
    shapeProps:
        fill:
            type: none
        strokeColor: rgba(200,200,200,1)
    locked: false
    area:
        x: 0
        y: 0
        w: {$-expr: "width"}
        h: {$-expr: "height"}
    childItems:
      - $-foreach: {source: "nodeItems", it: "it"}
        id: {$-expr: "it.id"}
        name: {$-expr: "it.name"}
        shape: {$-expr: "it.shape"}
        shapeProps: {$-expr: "toJSON(it.shapeProps)"}
        args: {$-expr: "it.getArgs()"}
        locked: {$-expr: "it.locked"}
        textSlots: {$-expr: "toJSON(it.textSlots)"}
        area:
            x: {$-expr: "it.x"}
            y: {$-expr: "it.y"}
            w: {$-expr: "it.w"}
            h: {$-expr: "it.h"}

      - $-foreach: {source: "connectorItems", it: "it"}
        id: {$-expr: "it.id"}
        name: {$-expr: "it.name"}
        shape: {$-expr: "it.shape"}
        shapeProps: {$-expr: "toJSON(it.shapeProps)"}
        args: {$-expr: "it.getArgs()"}
        locked: {$-expr: "it.locked"}
        textSlots: {$-expr: "toJSON(it.textSlots)"}
        area:
            x: {$-expr: "it.x"}
            y: {$-expr: "it.y"}
            w: {$-expr: "it.w"}
            h: {$-expr: "it.h"}
