name: Tabs panel
args:
  numTabs: { type: number, value: 3, min: 1, name: "Numbers of tabs" }
  tabWidth: { type: number, value: 100, min: 0, name: "Tab width" }
  tabHeight: { type: number, value: 40, min: 0, name: Tab height }
  tabCornerRadius: { type: number, value: 6, min: 0, name: "Tab Corner radius" }
  cornerRadius: { type: number, value: 10, min: 0, name: "Corner radius" }
  tabGap: { type: number, value: 5, min: 0, name: "Tab gap", description: "Distance between tabs" }
  padding: { type: number, value: 10, min: 0, name: Padding }
  tabBackground: {type: advanced-color, value: { type: solid, color: "rgba(255, 255, 255, 1)"}, name: "Tab background" }
  inactiveBackground: { type: advanced-color, value: {type: solid, color: "rgba(232, 232, 232, 1)"}, name: "Inactive tab background"}
  background: { type: advanced-color, value: { type: solid, color: "rgba(240, 240, 240, 1)" }, name: Background }
  strokeColor: { type: color, value: "rgba(212,212,212,1.0)", name: Stroke color }
  textColor: { type: color, value: "rgba(30,30,30,1.0)", name: Text color }
  shadow: { type: boolean, value: true, name: Drop shadow }
  showAllTabs:
    type: boolean
    value: false
    name: Show all tabs
    description: |
      Displays all tabs in edit mode next to each other for easier editing.
      In view mode all the tabs will be placed in their proper position and will be hidden

import:
  - ./src/tabs-panel.sch

handlers:
  delete: onDeleteItem(itemId, item)

controls:
  - name: addTab
    type: button
    text: New tab
    placement: TL
    x: {$-expr: "tabMargin + (numTabs) * (tw + tabGap) + max(15, tabGap * 2)" }
    y: {$-expr: topMargin}
    width: 60
    height: 30
    click:
      - numTabs = numTabs + 1

  - $-for: { start: 0, until: {$-expr: numTabs}, it: idx}
    $-if: numTabs > 1 && showAllTabs
    data:
      tabIndex: {$-expr: idx}
    selectedItemId: {$-str: "tab-container-${idx+1}" }
    name: insertTab
    type: button
    text: Insert tab
    placement: TL
    x: {$-expr: "padding + idx * (containerWidth + padding) + ifcond(idx > 0, 2*padding, 0) + containerWidth / 2 - 60" }
    y: {$-expr: "topMargin + tabHeight - tabCornerRadius - 1 + containerHeight" }
    width: 80
    height: 30
    click:
      - insertTabAt(control.data.tabIndex)

  - $-for: { start: 0, until: {$-expr: "ifcond(showAllTabs, numTabs, -1)"}, it: idx }
    $-if: numTabs > 1
    data:
      tabIndex: { $-expr: idx }
    selectedItemId: { $-str: "tab-container-${idx+1}" }
    name: removeTab
    type: button
    text: "⤫"
    placement: BL
    x: { $-expr: "padding + idx * (containerWidth + padding) + ifcond(idx > 0, 2*padding, 0) + containerWidth" }
    y: { $-expr: "topMargin + tabHeight - tabCornerRadius - 1" }
    width: 20
    height: 20
    click:
      - deleteTab(control.data.tabIndex)

  - $-for: {start: 0, until: {$-expr: numTabs}, it: idx}
    $-if: numTabs > 1
    data:
      tabIndex: { $-expr: idx }
    selectedItemId: { $-str: "tab-${idx+1}" }
    name: removeTab
    type: button
    text: "⤫"
    placement: BL
    x: { $-expr: "tabMargin + idx * (tw + tabGap) + tw" }
    y: { $-expr: topMargin }
    width: 20
    height: 20
    click:
      - deleteTab(control.data.tabIndex)

  - $-for: { start: 1, until: { $-expr: numTabs }, it: idx }
    $-if: numTabs > 1
    data:
      tabIndex: { $-expr: idx }
    selectedItemId: { $-str: "tab-container-${idx+1}" }
    name: moveTabLeft
    type: button
    text: <
    placement: TL
    x: { $-expr: "padding + idx * (containerWidth + padding) + ifcond(idx > 0, 2*padding, 0)" }
    y: { $-expr: "topMargin + tabHeight - tabCornerRadius - 1 + containerHeight" }
    width: 30
    height: 20
    click:
      - swapTabs(control.data.tabIndex, control.data.tabIndex+1)

  - $-for: { start: 0, until: { $-expr: numTabs - 1 }, it: idx }
    $-if: numTabs > 1
    data:
      tabIndex: { $-expr: idx }
    selectedItemId: { $-str: "tab-container-${idx+1}" }
    name: moveTabRight
    type: button
    text: '>'
    placement: TR
    x: { $-expr: "padding + idx * (containerWidth + padding) + ifcond(idx > 0, 2*padding, 0) + containerWidth" }
    y: { $-expr: topMargin + tabHeight - tabCornerRadius - 1 + containerHeight }
    width: 30
    height: 20
    click:
      - swapTabs(control.data.tabIndex+1, control.data.tabIndex+2)

  - $-if: showAllTabs == true
    type: button
    text: Hide all tabs
    placement: TL
    x: { $-expr: width }
    y: 0
    width: 90
    height: 30
    click:
      - showAllTabs = false

  - $-else: ""
    type: button
    text: Show all tabs
    placement: TL
    x: { $-expr: width }
    y: 0
    width: 90
    height: 30
    click:
      - showAllTabs = true
description: Panel with tabs
preview: data:image/svg+xml;base64,PHN2ZyByZWY9InN2Z0NvbnRhaW5lciIgY2xhc3M9ImV4cG9ydC1zdmctcHJldmlldyIKICAgICAgICB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIyMDBweCIKICAgICAgICB2aWV3Qm94PSItMTAgLTEwIDU2MCAzODAiCiAgICAgICAgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiCiAgICAgICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICAgICAgIHhtbG5zOnhodG1sPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIgogICAgICAgIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiA+CiAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwwKSByb3RhdGUoMCkiIGRhdGEtc3ZnLWl0ZW0tY29udGFpbmVyLWlkPSJpUnVRLTdJR3giIGRhdGEtaXRlbS1pZD0iaVJ1US03SUd4IiBzdHlsZT0ib3BhY2l0eTogMTsgbWl4LWJsZW5kLW1vZGU6IG5vcm1hbDsiPjxnPjxkZWZzPjxmaWx0ZXIgaWQ9Iml0ZW0tZWZmZWN0LWRyb3Atc2hhZG93LWlSdVEtN0lHeC0wIiB4PSItNTAwJSIgeT0iLTUwMCUiIHdpZHRoPSIyMDAwJSIgaGVpZ2h0PSIyMDAwJSI+PGZlR2F1c3NpYW5CbHVyIGluPSJTb3VyY2VHcmFwaGljIiBzdGREZXZpYXRpb249IjIwIj48L2ZlR2F1c3NpYW5CbHVyPjwvZmlsdGVyPjwvZGVmcz48cGF0aCBkPSJNIDUyMCAzNjAgIEwgMjAgMzYwIGEgMjAgMjAgMCAwIDEgLTIwIC0yMCAgTCAwIDIwICBhIDIwIDIwIDAgMCAxIDIwIC0yMCAgIEwgNTIwIDAgICBhIDIwIDIwIDAgMCAxIDIwIDIwICBMIDU0MCAzNDAgICBhIDIwIDIwIDAgMCAxIC0yMCAyMCBaIiBzdHJva2U9Im5vbmUiIGZpbGw9InJnYmEoMCwwLDAsMS4wKSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMyAzKSIgc3R5bGU9Im9wYWNpdHk6IDAuMiIgZmlsdGVyPSJ1cmwoI2l0ZW0tZWZmZWN0LWRyb3Atc2hhZG93LWlSdVEtN0lHeC0wKSI+PC9wYXRoPjwvZz4gPGRlZnM+PC9kZWZzPiA8ZyBmaWx0ZXI9IiI+IDxnIHN0eWxlPSJvcGFjaXR5OiAxOyI+PGc+IDwvZz4gPHBhdGggZD0iTSA1MjAgMzYwICBMIDIwIDM2MCBhIDIwIDIwIDAgMCAxIC0yMCAtMjAgIEwgMCAyMCAgYSAyMCAyMCAwIDAgMSAyMCAtMjAgICBMIDUyMCAwICAgYSAyMCAyMCAwIDAgMSAyMCAyMCAgTCA1NDAgMzQwICAgYSAyMCAyMCAwIDAgMSAtMjAgMjAgWiIgc3Ryb2tlLXdpZHRoPSIxcHgiIHN0cm9rZT0icmdiYSgyMTIsIDIxMiwgMjEyLCAxKSIgc3Ryb2tlLWRhc2hhcnJheT0iIiBkYXRhLWl0ZW0taWQ9ImlSdVEtN0lHeCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZmlsbD0icmdiYSgyNDAsMjQwLDI0MCwxLjApIj48L3BhdGg+PC9nPiAgPGcgc3R5bGU9Im9wYWNpdHk6IDE7Ij48Zm9yZWlnbk9iamVjdCBkYXRhLXRleHQtc2xvdC1uYW1lPSJib2R5IiBpZD0iaXRlbS10ZXh0LXNsb3QtaVJ1US03SUd4LWJvZHkiIHg9IjAiIHk9IjAiIHdpZHRoPSI1NDAiIGhlaWdodD0iMzYwIj48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBkYXRhLWl0ZW0taWQ9ImlSdVEtN0lHeCIgY2xhc3M9Iml0ZW0tdGV4dC1jb250YWluZXIiIHN0eWxlPSJjb2xvcjogcmdiKDAsIDAsIDApOyBmb250LXNpemU6IDE0cHg7IGZvbnQtZmFtaWx5OiBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOyBwYWRkaW5nOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgZGlzcGxheTogdGFibGUtY2VsbDsgYm94LXNpemluZzogYm9yZGVyLWJveDsgd2lkdGg6IDU0MHB4OyBoZWlnaHQ6IDM2MHB4OyI+PGRpdiBkYXRhLWl0ZW0tdGV4dC1lbGVtZW50LWl0ZW0taWQ9ImlSdVEtN0lHeCIgY2xhc3M9Iml0ZW0tdGV4dC1lbGVtZW50IiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyI+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0PjwvZz48L2c+ICAgICAgICAgPGc+PGcgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSw0MCwyMCkiIGRhdGEtc3ZnLWl0ZW0tY29udGFpbmVyLWlkPSJHb04yVzVVLUEiIGRhdGEtaXRlbS1pZD0iR29OMlc1VS1BIiBzdHlsZT0ib3BhY2l0eTogMTsgbWl4LWJsZW5kLW1vZGU6IG5vcm1hbDsiPiA8ZGVmcz48L2RlZnM+IDxnIGZpbHRlcj0iIj4gPGcgc3R5bGU9Im9wYWNpdHk6IDE7Ij48Zz4gPC9nPiA8cGF0aCBkPSJNIDkxIDYwICBMIDkgNjAgYSA5IDkgMCAwIDEgLTkgLTkgIEwgMCA5ICBhIDkgOSAwIDAgMSA5IC05ICAgTCA5MSAwICAgYSA5IDkgMCAwIDEgOSA5ICBMIDEwMCA1MSAgIGEgOSA5IDAgMCAxIC05IDkgWiIgc3Ryb2tlLXdpZHRoPSIwcHgiIHN0cm9rZT0icmdiYSgzMCwzMCwzMCwxLjApIiBzdHJva2UtZGFzaGFycmF5PSIiIGRhdGEtaXRlbS1pZD0iR29OMlc1VS1BIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBmaWxsPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDEpIj48L3BhdGg+PC9nPiAgPGcgc3R5bGU9Im9wYWNpdHk6IDE7Ij48Zm9yZWlnbk9iamVjdCBkYXRhLXRleHQtc2xvdC1uYW1lPSJib2R5IiBpZD0iaXRlbS10ZXh0LXNsb3QtR29OMlc1VS1BLWJvZHkiIHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAiIGhlaWdodD0iNjAiPjxkaXYgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiIGRhdGEtaXRlbS1pZD0iR29OMlc1VS1BIiBjbGFzcz0iaXRlbS10ZXh0LWNvbnRhaW5lciIgc3R5bGU9ImNvbG9yOiByZ2IoMCwgMCwgMCk7IGZvbnQtc2l6ZTogMTRweDsgZm9udC1mYW1pbHk6IEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7IHBhZGRpbmc6IDE1cHggMHB4IDBweDsgdGV4dC1hbGlnbjogY2VudGVyOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB3aGl0ZS1zcGFjZTogbm9ybWFsOyBkaXNwbGF5OiB0YWJsZS1jZWxsOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyB3aWR0aDogMTAwcHg7IGhlaWdodDogNjBweDsiPjxkaXYgZGF0YS1pdGVtLXRleHQtZWxlbWVudC1pdGVtLWlkPSJHb04yVzVVLUEiIGNsYXNzPSJpdGVtLXRleHQtZWxlbWVudCIgc3R5bGU9ImRpc3BsYXk6IGlubGluZS1ibG9jazsiPjxwIHN0eWxlPSJtYXJnaW4tdG9wOiAwcHg7IG1hcmdpbi1ib3R0b206IDBweDsgcGFkZGluZzogMHB4OyBtaW4taGVpZ2h0OiAxOHB4OyI+VGFiIDE8L3A+PC9kaXY+PC9kaXY+PC9mb3JlaWduT2JqZWN0PjwvZz48L2c+ICAgICAgICAgIDwvZz48ZyB0cmFuc2Zvcm09Im1hdHJpeCgxLDAsMCwxLDE2MCwyMCkiIGRhdGEtc3ZnLWl0ZW0tY29udGFpbmVyLWlkPSJWWDB2OTFQSGkiIGRhdGEtaXRlbS1pZD0iVlgwdjkxUEhpIiBzdHlsZT0ib3BhY2l0eTogMC41OyBtaXgtYmxlbmQtbW9kZTogbm9ybWFsOyI+IDxkZWZzPjwvZGVmcz4gPGcgZmlsdGVyPSIiPiA8ZyBzdHlsZT0ib3BhY2l0eTogMTsiPjxnPiA8L2c+IDxwYXRoIGQ9Ik0gOTEgNjAgIEwgOSA2MCBhIDkgOSAwIDAgMSAtOSAtOSAgTCAwIDkgIGEgOSA5IDAgMCAxIDkgLTkgICBMIDkxIDAgICBhIDkgOSAwIDAgMSA5IDkgIEwgMTAwIDUxICAgYSA5IDkgMCAwIDEgLTkgOSBaIiBzdHJva2Utd2lkdGg9IjBweCIgc3Ryb2tlPSJyZ2JhKDMwLDMwLDMwLDEuMCkiIHN0cm9rZS1kYXNoYXJyYXk9IiIgZGF0YS1pdGVtLWlkPSJWWDB2OTFQSGkiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9InJnYmEoMjU1LCAyNTUsIDI1NSwgMSkiPjwvcGF0aD48L2c+ICA8ZyBzdHlsZT0ib3BhY2l0eTogMTsiPjxmb3JlaWduT2JqZWN0IGRhdGEtdGV4dC1zbG90LW5hbWU9ImJvZHkiIGlkPSJpdGVtLXRleHQtc2xvdC1WWDB2OTFQSGktYm9keSIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSI2MCI+PGRpdiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIgZGF0YS1pdGVtLWlkPSJWWDB2OTFQSGkiIGNsYXNzPSJpdGVtLXRleHQtY29udGFpbmVyIiBzdHlsZT0iY29sb3I6IHJnYigwLCAwLCAwKTsgZm9udC1zaXplOiAxNHB4OyBmb250LWZhbWlseTogQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjsgcGFkZGluZzogMTVweCAwcHggMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IHZlcnRpY2FsLWFsaWduOiB0b3A7IHdoaXRlLXNwYWNlOiBub3JtYWw7IGRpc3BsYXk6IHRhYmxlLWNlbGw7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IHdpZHRoOiAxMDBweDsgaGVpZ2h0OiA2MHB4OyI+PGRpdiBkYXRhLWl0ZW0tdGV4dC1lbGVtZW50LWl0ZW0taWQ9IlZYMHY5MVBIaSIgY2xhc3M9Iml0ZW0tdGV4dC1lbGVtZW50IiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyI+PHAgc3R5bGU9Im1hcmdpbi10b3A6IDBweDsgbWFyZ2luLWJvdHRvbTogMHB4OyBwYWRkaW5nOiAwcHg7IG1pbi1oZWlnaHQ6IDE4cHg7Ij5UYWIgMjwvcD48L2Rpdj48L2Rpdj48L2ZvcmVpZ25PYmplY3Q+PC9nPjwvZz4gICAgICAgICAgPC9nPjxnIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLDEsMjgwLDIwKSIgZGF0YS1zdmctaXRlbS1jb250YWluZXItaWQ9ImNIVXpZSVNwZiIgZGF0YS1pdGVtLWlkPSJjSFV6WUlTcGYiIHN0eWxlPSJvcGFjaXR5OiAwLjU7IG1peC1ibGVuZC1tb2RlOiBub3JtYWw7Ij4gPGRlZnM+PC9kZWZzPiA8ZyBmaWx0ZXI9IiI+IDxnIHN0eWxlPSJvcGFjaXR5OiAxOyI+PGc+IDwvZz4gPHBhdGggZD0iTSA5MSA2MCAgTCA5IDYwIGEgOSA5IDAgMCAxIC05IC05ICBMIDAgOSAgYSA5IDkgMCAwIDEgOSAtOSAgIEwgOTEgMCAgIGEgOSA5IDAgMCAxIDkgOSAgTCAxMDAgNTEgICBhIDkgOSAwIDAgMSAtOSA5IFoiIHN0cm9rZS13aWR0aD0iMHB4IiBzdHJva2U9InJnYmEoMzAsMzAsMzAsMS4wKSIgc3Ryb2tlLWRhc2hhcnJheT0iIiBkYXRhLWl0ZW0taWQ9ImNIVXpZSVNwZiIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZmlsbD0icmdiYSgyNTUsIDI1NSwgMjU1LCAxKSI+PC9wYXRoPjwvZz4gIDxnIHN0eWxlPSJvcGFjaXR5OiAxOyI+PGZvcmVpZ25PYmplY3QgZGF0YS10ZXh0LXNsb3QtbmFtZT0iYm9keSIgaWQ9Iml0ZW0tdGV4dC1zbG90LWNIVXpZSVNwZi1ib2R5IiB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjYwIj48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBkYXRhLWl0ZW0taWQ9ImNIVXpZSVNwZiIgY2xhc3M9Iml0ZW0tdGV4dC1jb250YWluZXIiIHN0eWxlPSJjb2xvcjogcmdiKDAsIDAsIDApOyBmb250LXNpemU6IDE0cHg7IGZvbnQtZmFtaWx5OiBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOyBwYWRkaW5nOiAxNXB4IDBweCAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgdmVydGljYWwtYWxpZ246IHRvcDsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgZGlzcGxheTogdGFibGUtY2VsbDsgYm94LXNpemluZzogYm9yZGVyLWJveDsgd2lkdGg6IDEwMHB4OyBoZWlnaHQ6IDYwcHg7Ij48ZGl2IGRhdGEtaXRlbS10ZXh0LWVsZW1lbnQtaXRlbS1pZD0iY0hVellJU3BmIiBjbGFzcz0iaXRlbS10ZXh0LWVsZW1lbnQiIHN0eWxlPSJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij48cCBzdHlsZT0ibWFyZ2luLXRvcDogMHB4OyBtYXJnaW4tYm90dG9tOiAwcHg7IHBhZGRpbmc6IDBweDsgbWluLWhlaWdodDogMThweDsiPlRhYiAzPC9wPjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48L2c+PC9nPiAgICAgICAgICA8L2c+PGcgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwyMCw2MCkiIGRhdGEtc3ZnLWl0ZW0tY29udGFpbmVyLWlkPSItYUZNdVFITmwiIGRhdGEtaXRlbS1pZD0iLWFGTXVRSE5sIiBzdHlsZT0ib3BhY2l0eTogMTsgbWl4LWJsZW5kLW1vZGU6IG5vcm1hbDsiPiA8ZGVmcz48L2RlZnM+IDxnIGZpbHRlcj0iIj4gPGcgc3R5bGU9Im9wYWNpdHk6IDE7Ij48Zz4gPC9nPiA8cGF0aCBkPSJNIDQ4MCAyODAgIEwgMjAgMjgwIGEgMjAgMjAgMCAwIDEgLTIwIC0yMCAgTCAwIDIwICBhIDIwIDIwIDAgMCAxIDIwIC0yMCAgIEwgNDgwIDAgICBhIDIwIDIwIDAgMCAxIDIwIDIwICBMIDUwMCAyNjAgICBhIDIwIDIwIDAgMCAxIC0yMCAyMCBaIiBzdHJva2Utd2lkdGg9IjBweCIgc3Ryb2tlPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDEpIiBzdHJva2UtZGFzaGFycmF5PSIiIGRhdGEtaXRlbS1pZD0iLWFGTXVRSE5sIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBmaWxsPSJyZ2JhKDI1NSwgMjU1LCAyNTUsIDEpIj48L3BhdGg+PC9nPiAgPGcgc3R5bGU9Im9wYWNpdHk6IDE7Ij48Zm9yZWlnbk9iamVjdCBkYXRhLXRleHQtc2xvdC1uYW1lPSJib2R5IiBpZD0iaXRlbS10ZXh0LXNsb3QtLWFGTXVRSE5sLWJvZHkiIHg9IjAiIHk9IjAiIHdpZHRoPSI1MDAiIGhlaWdodD0iMjgwIj48ZGl2IHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiBkYXRhLWl0ZW0taWQ9Ii1hRk11UUhObCIgY2xhc3M9Iml0ZW0tdGV4dC1jb250YWluZXIiIHN0eWxlPSJjb2xvcjogcmdiKDAsIDAsIDApOyBmb250LXNpemU6IDE0cHg7IGZvbnQtZmFtaWx5OiBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOyBwYWRkaW5nOiAwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgZGlzcGxheTogdGFibGUtY2VsbDsgYm94LXNpemluZzogYm9yZGVyLWJveDsgd2lkdGg6IDUwMHB4OyBoZWlnaHQ6IDI4MHB4OyI+PGRpdiBkYXRhLWl0ZW0tdGV4dC1lbGVtZW50LWl0ZW0taWQ9Ii1hRk11UUhObCIgY2xhc3M9Iml0ZW0tdGV4dC1lbGVtZW50IiBzdHlsZT0iZGlzcGxheTogaW5saW5lLWJsb2NrOyI+PHAgc3R5bGU9Im1hcmdpbi10b3A6IDBweDsgbWFyZ2luLWJvdHRvbTogMHB4OyBwYWRkaW5nOiAwcHg7IG1pbi1oZWlnaHQ6IDE4cHg7Ij5UYWIgY29udGVudCAxPC9wPjwvZGl2PjwvZGl2PjwvZm9yZWlnbk9iamVjdD48L2c+PC9nPiAgICAgICAgICA8L2c+PC9nPiA8L2c+CiAgICA8L3N2Zz4=

item:
  id: root
  shapeProps:
    cornerRadius: { $-expr: cornerRadius }
    strokeColor: { $-expr: strokeColor }
    strokeSize: 1
    fill: { $-expr: background }
    strokePattern: solid
  shape: rect
  area: { x: 0, "y": 0, w: 540, h: 360, r: 0, px: 0.5, py: 0.5, sx: 1, sy: 1 }
  name: Tabs panel
  links: []
  behavior:
    events:
      - id: e1
        event: init
        actions:
          - id: a1
            element: { $-str: 'tag: ${tabTag}' }
            method: set
            on: true
            args:
              field: shapeProps.fill
              value: { $-expr: inactiveBackground }
              animated: false
              animationDuration: 0.2
              transition: ease-in-out
              inBackground: true

          - id: a2
            element: '#tab-1'
            method: set
            on: true
            args:
              field: shapeProps.fill
              value: { $-expr: tabBackground }
              animated: false
              animationDuration: 0.2
              transition: ease-in-out
              inBackground: true

          - id: a3
            element: '#tab-container-1'
            method: toggleGroup
            on: true
            args:
              group: { $-str: 'tag: ${containerTag}' }
  effects:
    - $-if: shadow == true
      id: e1
      effect: drop-shadow
      name: Drop Shadow
      args:
        color: rgba(0,0,0,1.0)
        dx: 3
        dy: 3
        blur: 20
        opacity: 20
        inside: false
  childItems:
    - $-for: { start: 0, until: { $-expr: numTabs }, it: idx }
      id: { $-str: "tab-${idx+1}" }
      name: { $-str: "Tab ${idx+1}" }
      shapeProps:
        cornerRadius: { $-expr: tabCornerRadius }
        fill: { $-expr: "ifcond(idx == 0, tabBackground, inactiveBackground)" }
        strokeColor: rgba(30,30,30,1.0)
        strokeSize: 0
        strokePattern: solid
      shape: rect
      cursor: pointer
      area:
        x: { $-expr: "tabMargin + idx * (tw + tabGap)" }
        y: { $-expr: topMargin }
        w: { $-expr: tw }
        h: { $-expr: tabHeight }
        r: 0
        px: 0.5
        py: 0.5
        sx: 1
        sy: 1
      textSlots:
        body:
          text: { $-str: "<p>Tab ${idx+1}</p>" }
          color: { $-expr: textColor }
          halign: center
          valign: top
          fontSize: 14
          whiteSpace: normal
          font: Arial
          paddingLeft: 0
          paddingRight: 0
          paddingTop: 10
          paddingBottom: 0
      behavior:
        events:
          - id: e1
            event: clicked
            actions:
              - id: a1
                element: { $-str: 'tag: ${tabTag}' }
                method: set
                on: true
                args:
                  field: shapeProps.fill
                  value: { $-expr: inactiveBackground }
                  animated: false
                  animationDuration: 0.2
                  transition: ease-in-out
                  inBackground: true

              - id: a2
                element: self
                method: set
                on: true
                args:
                  field: shapeProps.fill
                  value: { $-expr: tabBackground }
                  animated: false
                  animationDuration: 0.2
                  transition: ease-in-out
                  inBackground: true

              - id: a3
                element: { $-str: '#tab-container-${idx+1}' }
                method: toggleGroup
                on: true
                args:
                  group: { $-str: 'tag: ${containerTag}' }

      tags:
        - { $-expr: tabTag }
      locked: true

    - $-for: { start: 0, until: { $-expr: numTabs }, it: idx }
      id: { $-str: "tab-container-${idx+1}" }
      shapeProps:
        cornerRadius : { $-expr: cornerRadius }
        fill         : { $-expr: tabBackground }
        strokeColor  : rgba(255, 255, 255, 1)
        strokeSize   : 0
        strokePattern: solid
      shape: rect
      area:
        x: { $-expr: "padding + idx * (containerWidth + padding) + ifcond(idx > 0, 2*padding, 0)" }
        y: { $-expr: "topMargin + tabHeight - tabCornerRadius - 1" }
        w: { $-expr: containerWidth }
        h: { $-expr: containerHeight }
        r: 0
        px: 0.5
        py: 0.5
        sx: 1
        sy: 1
      name: { $-str: "Tab container ${idx+1}" }
      textSlots:
        body:
          text: { $-str: "<h2>Tab ${idx+1}</h2><p><b>Attach items here</b></p><p><i>(This text will be hidden in view mode)</i></p>" }
          color: rgba(150,150,150,1.0)
          halign: center
          valign: middle
          fontSize: 16
          whiteSpace: normal
          font: Arial
          paddingLeft: 0
          paddingRight: 0
          paddingTop: 0
          paddingBottom: 0
      behavior:
        events:
          - id: e1
            event: init
            actions:
              - id: a1
                on: true
                element: self
                method: set
                args:
                  field: textSlots.body.color
                  value: rgba(0,0,0,0.0)

              - id: a2
                on: true
                element: self
                method: move
                args:
                  x: { $-expr: padding }
                  y: { $-expr: "topMargin + tabHeight - tabCornerRadius - 1" }
                  animated: false

              - $-if: idx > 0
                id: a3
                on: true
                element: self
                method: hide
                args:
                  animated: false
      visible: { $-expr: "ifcond(showAllTabs, true, idx == 0)" }
      tags:
        - { $-expr: containerTag }
      locked: true
  textSlots:
    body:
      text: ""
      color: rgba(0,0,0,1.0)
      halign: center
      valign: middle
      fontSize: 14
      whiteSpace: normal
      font: Arial
      paddingLeft: 0
      paddingRight: 0
      paddingTop: 0
      paddingBottom: 0
